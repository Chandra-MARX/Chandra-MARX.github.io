<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Examples of MARX in use &#8212; MARX 6.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/marxwebtheme.css?v=8224f6db" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css?v=7f9a90b1" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css?v=6644e6bb" />
    
    <script src="../_static/documentation_options.js?v=b6ed0530"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within MARX 6.0.1 documentation"
          href="../_static/opensearch.xml"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Simulating a user-defined CCD spectrum with ACIS" href="ACISpowerpileup/powerlaw.html" />
    <link rel="prev" title="Reporting a problem or issue" href="../inbrief/gettinghelp.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../std-parindex.html" title="MARX Parameter Index"
             >MARX Parameters</a> |</li>
        <li class="right" >
          <a href="ACISpowerpileup/powerlaw.html" title="Simulating a user-defined CCD spectrum with ACIS"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../inbrief/gettinghelp.html" title="Reporting a problem or issue"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">MARX 6.0.1 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Examples of MARX in use</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="examples-of-marx-in-use">
<span id="examples"></span><h1>Examples of MARX in use<a class="headerlink" href="#examples-of-marx-in-use" title="Link to this heading">Â¶</a></h1>
<p>This section contains examples of <strong>marx</strong> in use from rather trivial use cases
to complex and demanding analysis scripts. Going through these examples is the
best way to discover the power of <strong>marx</strong>. They also provide a great starting point
for developing your own analysis.</p>
<p>All examples assume that you are working in a directory where you have write permission
and enough disk space for the simulation.  It is also assumed that the
<strong>marx</strong> executables are on the search path and that the <strong>marx</strong> parameter
files <code class="docutils literal notranslate"><span class="pre">marx.par</span></code>, <code class="docutils literal notranslate"><span class="pre">marxasp.par</span></code>, and <code class="docutils literal notranslate"><span class="pre">marxpileup.par</span></code> are located in the
current directory or in the path of your <code class="docutils literal notranslate"><span class="pre">PFILES</span></code> environment variable.
If you installed <strong>marx</strong> as described in <a class="reference internal" href="../inbrief/install.html#installing"><span class="std std-ref">Downloading and Installing Marx</span></a>, the
latter requirement may be accomplished by running:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>unix% marx --help
  .
  .
marx parameter files may be found in:
 /opt/marx5.5/share/marx/pfiles/
</pre></div>
</div>
<p>Simply copy the files from the indicated directory to the current one:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>unix% cp /opt/marx5.5/share/marx/pfiles/*.par .
</pre></div>
</div>
<p>In most examples, <strong>marx</strong> is used together with a spectral analysis program to
write the input spectrum or to analyze the results. The most
common programs are <a class="reference external" href="http://heasarc.nasa.gov/xanadu/xspec/">Xspec</a>, <a class="reference external" href="http://cxc.harvard.edu/sherpa/">Sherpa</a>, and <a class="reference external" href="http://space.mit.edu/cxc/isis/">ISIS</a>. Our examples use
<a class="reference external" href="http://cxc.harvard.edu/sherpa/">Sherpa</a>, because it is typically installed when you install <a class="reference external" href="http://cxc.harvard.edu/ciao/">CIAO</a>.
It should be easy to adapt the examples for other spectral analysis systems as well.</p>
<p>We use Python as a scripting language and the
<a class="reference external" href="https://cxc.cfa.harvard.edu/ciao/scripting/runtool.html">Python interface to CIAO</a>
to call <a class="reference external" href="http://cxc.harvard.edu/ciao/">CIAO</a> tools. Even if you are not familiar with Python, it should not be
difficult to convert the examples to shell scripts. For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>rt.dmcopy(f&quot;marx_saotrace.fits[@{evt2file}[GTI4]]&quot;, &quot;marx_saotrace-filtered.fits&quot;, clobber=True)
</pre></div>
</div>
<p>translates to a command line of:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>unix% dmcopy &quot;marx_saotrace.fits[@${evt2file}[GTI4]]&quot; marx_saotrace-filtered.fits clobber=yes
</pre></div>
</div>
<p><strong>marx</strong> itself currently does not have a nice Python interface, so to call <strong>marx</strong> we simply
pass a string directly from Python to the shell, such as:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>import subprocess
out = subprocess.call(&#39;marx SourceType=&quot;point&quot; OutputDir=&quot;result&quot;&#39;, shell=True)
</pre></div>
</div>
<p>which is the equivalent of the shell command:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>unix% marx SourceType=&quot;point&quot; OutputDir=&quot;result&quot;
</pre></div>
</div>
<p>If we run <strong>marx</strong> multiple times in one example, we can use Python to parameterize that:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>for i in range(5):
    out = subprocess.call(f&#39;marx MinEnergy={i} MaxEnergy={i+1} OutputDir=&quot;result_{i}&quot;&#39;, shell=True)
</pre></div>
</div>
<p>Still, it should not be difficult to convert these examples to shell scripts so that
they can be pasted directly on the command line.</p>
<p>We present the following examples:</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="ACISpowerpileup/powerlaw.html">Simulating a user-defined CCD spectrum with ACIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="ACISpowerpileup/powerlaw.html#simulating-pile-up-in-an-acis-ccd-spectrum">Simulating pile-up in an ACIS CCD spectrum</a></li>
<li class="toctree-l1"><a class="reference internal" href="aped/aped.html">Simulating a thermal plasma with the HETGS grating</a></li>
<li class="toctree-l1"><a class="reference internal" href="hetgplaw/hetgplaw.html">HETG simulation of an extended source</a></li>
<li class="toctree-l1"><a class="reference internal" href="LETGpow/letgplaw.html">Simulating an LETG/ACIS-S observation</a></li>
<li class="toctree-l1"><a class="reference internal" href="marxcat/marxcat.html">Simulating two overlapping sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="background/background.html">Including background in a <strong>marx</strong> simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="simobs/simobs.html">Replicating a Chandra Observation / Using ChaRT or SAOTrace</a></li>
</ul>
</div>
<p>Further examples of <strong>marx</strong> use can be found on the <a class="reference external" href="http://cxc.harvard.edu/ciao/threads/all.html">CIAO thread
pages</a>:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://cxc.harvard.edu/ciao/threads/marx/">Using MARX to Create an Event File from ChaRT
Rays</a></p></li>
<li><p><a class="reference external" href="http://cxc.harvard.edu/sherpa/threads/marx/">Creating an Input Spectrum for Running MARX Simulations</a></p></li>
<li><p><a class="reference external" href="http://cxc.harvard.edu/ciao/threads/marx_sim/">Using MARX to Simulate an Existing Observation</a></p></li>
<li><p><a class="reference external" href="http://cxc.harvard.edu/ciao/threads/marx_unobs_sim/">Using MARX to Simulate a Planned
Observation</a></p></li>
</ul>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<form action="../search.html" method="get">
<input type="text" name="q" placeholder="Search" />
<input type="hidden" name="check_keywords" value="yes" />
<input type="hidden" name="area" value="default" />
</form>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="../inbrief/gettinghelp.html"
                          title="previous chapter">Reporting a problem or issue</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="ACISpowerpileup/powerlaw.html"
                          title="next chapter">Simulating a user-defined CCD spectrum with ACIS</a></p>
  </div><hr style="color: #FFF;"></hr>
<a href="http://cxc.harvard.edu/">
    <img src="../_static/cxcfooterCXCicon.png" 
	 alt="Chandra X-ray Center" class="img-logo"></img>
</a>
<p></p>
<a href="http://space.mit.edu/cxc/">CXC@MIT</a>
<p></p>
<a href="http://space.mit.edu/">
    <img src="../_static/logo-mit-kavli.png" 
	 alt="MIT Kavli Institute" class="img-logo"></img>
</a>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../std-parindex.html" title="MARX Parameter Index"
             >MARX Parameters</a> |</li>
        <li class="right" >
          <a href="ACISpowerpileup/powerlaw.html" title="Simulating a user-defined CCD spectrum with ACIS"
             >next</a> |</li>
        <li class="right" >
          <a href="../inbrief/gettinghelp.html" title="Reporting a problem or issue"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">MARX 6.0.1 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Examples of MARX in use</a></li> 
      </ul>
    </div>
    <div class="footer">
    <a href="mailto:marx-help@space.mit.edu">MARX support: marx-help@space.mit.edu</a>
    <a href="https://accessibility.mit.edu/">Accessibility</a>
        &copy; Copyright 2002-2025, Massachusetts Institute of Technology.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 8.2.3.
    </div>
  </body>
</html>